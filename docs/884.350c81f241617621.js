"use strict";(self.webpackChunktask_controller_angular=self.webpackChunktask_controller_angular||[]).push([[884],{5884:($,g,s)=>{s.r(g),s.d(g,{DashboardModule:()=>Q});var l=s(6895),b=s(860),t=s(8274);let p=(()=>{class n{constructor(){this.showModal=!1,this.showEditModal=!1}show(){this.showModal=!0}close(){this.showModal=!1}showEdit(){this.showEditModal=!0}closeEdit(){this.showEditModal=!1}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var x=s(9646),C=s(8746),v=s(262),M=s(9300),u=s(8505),Z=s(4004),c=s(2340),_=s(529);let m=(()=>{class n{constructor(o){this.http=o}getBoards(){return this.http.get(c.N.apiUrl+"/boards").pipe((0,Z.U)(e=>e.boards))}deleteBoard(o){return this.http.delete(c.N.apiUrl+`/boards/${o}`)}addBoard(o){return this.http.post(c.N.apiUrl+"/boards",o).pipe((0,u.b)(d=>d))}updateBoard(o,e){return this.http.put(c.N.apiUrl+`/boards/${o}`,e).pipe((0,u.b)(r=>r))}}return n.\u0275fac=function(o){return new(o||n)(t.LFG(_.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var i=s(433);let y=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-loader"]],decls:13,vars:0,consts:[[1,"lds-default"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"div")(2,"div")(3,"div")(4,"div")(5,"div")(6,"div")(7,"div")(8,"div")(9,"div")(10,"div")(11,"div")(12,"div"),t.qZA())},styles:[".lds-default[_ngcontent-%COMP%]{display:inline-block;position:relative;width:80px;height:80px}.lds-default[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{position:absolute;width:6px;height:6px;background:lightseagreen;border-radius:50%;animation:lds-default 1.2s linear infinite}.lds-default[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){animation-delay:0s;top:37px;left:66px}.lds-default[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){animation-delay:-.1s;top:22px;left:62px}.lds-default[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(3){animation-delay:-.2s;top:11px;left:52px}.lds-default[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(4){animation-delay:-.3s;top:7px;left:37px}.lds-default[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(5){animation-delay:-.4s;top:11px;left:22px}.lds-default[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(6){animation-delay:-.5s;top:22px;left:11px}.lds-default[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(7){animation-delay:-.6s;top:37px;left:7px}.lds-default[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(8){animation-delay:-.7s;top:52px;left:11px}.lds-default[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(9){animation-delay:-.8s;top:62px;left:22px}.lds-default[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(10){animation-delay:-.9s;top:66px;left:37px}.lds-default[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(11){animation-delay:-1s;top:62px;left:52px}.lds-default[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(12){animation-delay:-1.1s;top:52px;left:62px}@keyframes lds-default{0%,20%,80%,to{transform:scale(1)}50%{transform:scale(1.5)}}"]}),n})();function O(n,a){1&n&&(t.TgZ(0,"small",10),t._uU(1,"Name is required"),t.qZA())}function P(n,a){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,O,2,0,"small",9),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.form.controls.name)}}const T=function(n){return{invalid:n}};let A=(()=>{class n{constructor(o,e,d){this.fb=o,this.modal=e,this.dashboard=d,this.submitted=!1,this.name="",this.showEditModal=!1,this.onUpdate=new t.vpe,this.form=o.group({name:["",[i.kI.required]]})}ngOnInit(){}editBoard(){const o=this.form.value;this.submitted=!0,this.onUpdate.emit(o)}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(i.qu),t.Y36(p),t.Y36(m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-edit-modal"]],outputs:{onUpdate:"onUpdate"},decls:11,vars:6,consts:[[1,"modal"],[1,"modal__close",3,"click"],[1,"modal__header"],[1,"modal__form",3,"formGroup"],[3,"ngClass"],["formControlName","name","type","text","placeholder","Board name",1,"modal__input"],["class","validation",4,"ngIf"],[1,"modal__btn",3,"disabled","click"],[1,"validation"],["class","error",4,"ngIf"],[1,"error"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return e.modal.closeEdit()}),t._uU(2,"x"),t.qZA(),t.TgZ(3,"h3",2),t._uU(4,"Edit board"),t.qZA(),t.TgZ(5,"form",3)(6,"div",4),t._UZ(7,"input",5),t.YNc(8,P,2,1,"div",6),t.qZA(),t.TgZ(9,"button",7),t.NdJ("click",function(){return e.editBoard()}),t._uU(10,"Save"),t.qZA()()()),2&o&&(t.xp6(5),t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("ngClass",t.VKq(4,T,e.form.controls.name.touched&&e.form.controls.name.invalid)),t.xp6(2),t.Q6J("ngIf",e.form.controls.name.touched&&e.form.controls.name.invalid),t.xp6(1),t.Q6J("disabled",!e.form.valid||e.submitted))},dependencies:[l.mk,l.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;top:0;right:0;width:100%;height:100%;background-color:#00000080}.modal[_ngcontent-%COMP%]{position:relative;width:30%;height:200px;border-radius:7px;background-color:#fff;padding:30px;text-align:center;font-size:20px}.modal__close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background-color:azure}.modal__header[_ngcontent-%COMP%]{padding:20px}.modal__btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;color:azure;background-color:#20b2aa;border-radius:7px;cursor:pointer}.modal__input[_ngcontent-%COMP%]{border-radius:7px;border:1px solid lightseagreen;padding:20px;width:80%;margin-bottom:10px}.error[_ngcontent-%COMP%]{display:block;color:red;margin-bottom:10px;text-align:left;padding-left:20px}"]}),n})(),k=(()=>{class n{transform(o,e){return""===e?o:o?o.filter(d=>d.name.toLowerCase().includes(e.toLowerCase())):[]}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=t.Yjl({name:"filter",type:n,pure:!0}),n})(),U=(()=>{class n{transform(o,e){return"name"===e&&o&&o.sort((d,r)=>d.name===r.name?0:d.name<r.name?-1:1),"date"===e&&o&&o.sort((d,r)=>d.createdAt===r.createdAt?0:d.createdAt<r.createdAt?-1:1),"todo"===e&&o&&o.sort((d,r)=>d.taskCount.todo===r.taskCount.todo?0:d.taskCount.todo<r.taskCount.todo?-1:1),"inprogress"===e&&o&&o.sort((d,r)=>d.taskCount.inprogress===r.taskCount.inprogress?0:d.taskCount.inprogress<r.taskCount.inprogress?-1:1),"todo"===e&&o&&o.sort((d,r)=>d.taskCount.done===r.taskCount.done?0:d.taskCount.done<r.taskCount.done?-1:1),o}}return n.\u0275fac=function(o){return new(o||n)},n.\u0275pipe=t.Yjl({name:"sort",type:n,pure:!0}),n})();function B(n,a){1&n&&t._UZ(0,"app-loader",16)}function J(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"div",17)(1,"h3",18),t._uU(2),t.qZA(),t.TgZ(3,"p",19),t._uU(4),t.qZA(),t.TgZ(5,"p",20),t._uU(6),t.ALo(7,"date"),t.qZA(),t.TgZ(8,"div",21)(9,"div",22)(10,"ul",23)(11,"li",24)(12,"span"),t._uU(13),t.qZA()(),t.TgZ(14,"li",24)(15,"span"),t._uU(16),t.qZA()(),t.TgZ(17,"li",24)(18,"span"),t._uU(19),t.qZA()()()(),t.TgZ(20,"button",25),t.NdJ("click",function(){const r=t.CHM(o).$implicit,f=t.oxw();return t.KtG(f.editBoard(r._id))}),t._uU(21,"Edit"),t.qZA(),t.TgZ(22,"button",25),t.NdJ("click",function(){const r=t.CHM(o).$implicit,f=t.oxw();return t.KtG(f.deleteBoard(r._id))}),t._uU(23," Delete "),t.qZA()()()}if(2&n){const o=a.$implicit;t.xp6(2),t.Oqu(o.name),t.xp6(2),t.Oqu(o.description),t.xp6(2),t.Oqu(t.xi3(7,6,o.createdAt,"dd.MM.YYYY")),t.xp6(7),t.hij("Todo: ",o.taskCount.todo,""),t.xp6(3),t.hij("In progress: ",o.taskCount.inprogress,""),t.xp6(3),t.hij("Done: ",o.taskCount.done,"")}}function w(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"app-edit-modal",26),t.NdJ("onUpdate",function(d){t.CHM(o);const r=t.oxw();return t.KtG(r.updateBoard(d))}),t.qZA()}}let N=(()=>{class n{constructor(o,e){this.dashboard=o,this.modal=e,this.filterByName="",this.sort="",this.showModal=!1,this.boardId="",this.submitted=!1,this.isLoaded=!1,this.boards$=this.dashboard.getBoards().pipe((0,C.x)(()=>this.isLoaded=!0),(0,v.K)(d=>(0,x.of)([])))}ngOnInit(){}deleteBoard(o){this.isLoaded=!1,this.dashboard.deleteBoard(o).subscribe(()=>this.boards$=this.boards$.pipe((0,M.h)(e=>e[0]._id!==o)))}editBoard(o){this.boardId=o,this.modal.showEdit()}updateBoard(o){this.dashboard.updateBoard(this.boardId,o).subscribe(()=>{this.submitted=!1,this.modal.closeEdit(),this.boards$=this.boards$.pipe((0,u.b)(e=>{e[0]._id===this.boardId&&(e[0].name=o)}))},()=>this.submitted=!1)}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(m),t.Y36(p))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-board"]],decls:29,vars:13,consts:[[1,"toolbar"],[1,"toolbar__btn",3,"click"],[1,"toolbar__group"],["type","text","placeholder","Filter boards...",1,"toolbar__input",3,"ngModel","ngModelChange"],["name","sort",3,"ngModel","ngModelChange"],["value","","hidden",""],["value","name"],["value","date"],["value","todo"],["value","inprogress"],["value","done"],[1,"toolbar__btn"],["class","loader",4,"ngIf"],[1,"boards"],["class","board",4,"ngFor","ngForOf"],[3,"onUpdate",4,"ngIf"],[1,"loader"],[1,"board"],[1,"board__name"],[1,"board__description"],[1,"board__date"],[1,"board__tools"],[1,"board__stat"],[1,"stat__list"],[1,"stat__item"],[1,"board__btn",3,"click"],[3,"onUpdate"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return e.modal.show()}),t._uU(2,"+"),t.qZA(),t.TgZ(3,"div",2)(4,"input",3),t.NdJ("ngModelChange",function(r){return e.filterByName=r}),t.qZA(),t.TgZ(5,"select",4),t.NdJ("ngModelChange",function(r){return e.sort=r}),t.TgZ(6,"option",5),t._uU(7,"Sort by ..."),t.qZA(),t.TgZ(8,"option",6),t._uU(9,"name"),t.qZA(),t.TgZ(10,"option",7),t._uU(11,"date"),t.qZA(),t.TgZ(12,"option",8),t._uU(13,'"Todo"'),t.qZA(),t.TgZ(14,"option",9),t._uU(15,'"In progress"'),t.qZA(),t.TgZ(16,"option",10),t._uU(17,'"Done"'),t.qZA()(),t.TgZ(18,"button",11),t._uU(19,"ASC"),t.qZA(),t.TgZ(20,"button",11),t._uU(21,"DESC"),t.qZA()()(),t.YNc(22,B,1,0,"app-loader",12),t.TgZ(23,"div",13),t.YNc(24,J,24,9,"div",14),t.ALo(25,"sort"),t.ALo(26,"filter"),t.ALo(27,"async"),t.qZA(),t.YNc(28,w,1,0,"app-edit-modal",15)),2&o&&(t.xp6(4),t.Q6J("ngModel",e.filterByName),t.xp6(1),t.Q6J("ngModel",e.sort),t.xp6(17),t.Q6J("ngIf",!e.isLoaded),t.xp6(2),t.Q6J("ngForOf",t.xi3(25,5,t.xi3(26,8,t.lcZ(27,11,e.boards$),e.filterByName),e.sort)),t.xp6(4),t.Q6J("ngIf",e.modal.showEditModal))},dependencies:[l.sg,l.O5,i.YN,i.Kr,i.Fj,i.EJ,i.JJ,i.On,y,A,l.Ov,l.uU,k,U],styles:[".boards[_ngcontent-%COMP%]{display:flex;justify-content:space-around;text-align:center;flex-wrap:wrap;padding:50px}.board[_ngcontent-%COMP%]{width:20%;border-radius:20px;padding:20px;margin-bottom:30px;background-color:azure;color:#185d5d;box-shadow:0 10px 20px #676c7866}.board__btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;color:azure;background-color:#20b2aa;border-radius:7px;cursor:pointer}.board__btn[_ngcontent-%COMP%]{margin-right:10px}.stat__list[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;border-top:1px solid #000;border-bottom:1px solid #000;margin-top:10px;margin-bottom:10px}.toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-evenly;padding:20px;box-shadow:0 10px 20px #676c7833;border-bottom-left-radius:50px}.toolbar__group[_ngcontent-%COMP%]{width:50%;display:flex;align-items:center;justify-content:space-evenly}.toolbar__btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;color:azure;background-color:#20b2aa;border-radius:7px;cursor:pointer}.toolbar__input[_ngcontent-%COMP%]{border-radius:7px;border:1px solid lightseagreen;padding:10px;outline:none}.toolbar__input[_ngcontent-%COMP%]:focus{outline:2px solid lightseagreen}select[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;color:azure;background-color:#20b2aa;border-radius:7px;cursor:pointer;border:none;outline:none}.loader[_ngcontent-%COMP%]{margin:0 auto}"]}),n})();function q(n,a){1&n&&(t.TgZ(0,"small",11),t._uU(1,"Name is required"),t.qZA())}function I(n,a){if(1&n&&(t.TgZ(0,"div",9),t.YNc(1,q,2,0,"small",10),t.qZA()),2&n){const o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.form.controls.name)}}const Y=function(n){return{invalid:n}};let F=(()=>{class n{constructor(o,e,d){this.fb=o,this.modal=e,this.dashboard=d,this.submitted=!1,this.form=o.group({name:["",[i.kI.required]],description:""})}ngOnInit(){}addBoard(){const o=this.form.value;this.submitted=!0,this.dashboard.addBoard(o).subscribe(()=>{this.submitted=!1,this.modal.close()},()=>this.submitted=!1)}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(i.qu),t.Y36(p),t.Y36(m))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-modal"]],decls:13,vars:6,consts:[[1,"modal"],[1,"modal__close",3,"click"],[1,"modal__header"],[1,"modal__form",3,"formGroup"],[3,"ngClass"],["formControlName","name","type","text","placeholder","Board name",1,"modal__input"],["class","validation",4,"ngIf"],["formControlName","description","type","text","placeholder","Board description",1,"modal__input"],[1,"modal__btn",3,"disabled","click"],[1,"validation"],["class","error",4,"ngIf"],[1,"error"]],template:function(o,e){1&o&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return e.modal.close()}),t._uU(2,"x"),t.qZA(),t.TgZ(3,"h3",2),t._uU(4,"Add new board"),t.qZA(),t.TgZ(5,"form",3)(6,"div",4),t._UZ(7,"input",5),t.YNc(8,I,2,1,"div",6),t.qZA(),t.TgZ(9,"div"),t._UZ(10,"input",7),t.qZA(),t.TgZ(11,"button",8),t.NdJ("click",function(){return e.addBoard()}),t._uU(12,"Add"),t.qZA()()()),2&o&&(t.xp6(5),t.Q6J("formGroup",e.form),t.xp6(1),t.Q6J("ngClass",t.VKq(4,Y,e.form.controls.name.touched&&e.form.controls.name.invalid)),t.xp6(2),t.Q6J("ngIf",e.form.controls.name.touched&&e.form.controls.name.invalid),t.xp6(3),t.Q6J("disabled",!e.form.valid||e.submitted))},dependencies:[l.mk,l.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center;position:fixed;top:0;right:0;width:100%;height:100%;background-color:#00000080}.modal[_ngcontent-%COMP%]{position:relative;width:30%;height:250px;border-radius:7px;background-color:#fff;padding:30px;text-align:center;font-size:20px}.modal__close[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;background-color:azure}.modal__header[_ngcontent-%COMP%]{padding:20px}.modal__btn[_ngcontent-%COMP%]{padding:10px 20px;font-size:16px;color:azure;background-color:#20b2aa;border-radius:7px;cursor:pointer}.modal__input[_ngcontent-%COMP%]{border-radius:7px;border:1px solid lightseagreen;padding:20px;width:80%;margin-bottom:10px}.error[_ngcontent-%COMP%]{display:block;color:red;margin-bottom:10px;text-align:left;padding-left:20px}"]}),n})();function E(n,a){1&n&&t._UZ(0,"app-modal")}let z=(()=>{class n{constructor(o){this.modal=o,this.boards$=[],this.filter={filterByName:"",sort:""},this.isLoaded=!1}ngOnInit(){}}return n.\u0275fac=function(o){return new(o||n)(t.Y36(p))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-dashboard"]],decls:2,vars:1,consts:[[1,"dashboard"],[4,"ngIf"]],template:function(o,e){1&o&&(t._UZ(0,"app-board",0),t.YNc(1,E,1,0,"app-modal",1)),2&o&&(t.xp6(1),t.Q6J("ngIf",e.modal.showModal))},dependencies:[l.O5,N,F],styles:[".dashboard[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column}"]}),n})();var h=s(6471),S=s(6816);let j=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez]}),n})(),L=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[l.ez]}),n})();const D=[{path:"",component:z,canActivate:[h.a]}];let Q=(()=>{class n{}return n.\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({providers:[h.a,S.e],imports:[l.ez,b.Bz.forChild(D),i.UX,_.JF,j,i.u5,L]}),n})()}}]);